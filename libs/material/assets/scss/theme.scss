@import "@dynamic-forms/core/assets/scss/variables";
@import "@dynamic-forms/core/assets/scss/mixins";

.dynamic-form-wrapper.material {
  .dynamic-form {
    display: flex;
    flex-direction: column;
    margin: $dynamic-form-margin;

    &.grid {
      .row {
        mat-dynamic-form-button,
        mat-dynamic-form-icon,
        mat-dynamic-form-modal,
        mat-dynamic-form-accordion,
        mat-dynamic-form-tabs {
          display: contents;
        }
      }
    }

    .dynamic-form-header {
      @include dynamic-form-flex-container(
        $width: 100%,
        $margin-top: $dynamic-form-header-margin-top,
        $margin-bottom: $dynamic-form-header-margin-bottom
      );

      .dynamic-form-label {
        @include dynamic-form-label(
          $font-size: $dynamic-form-label-font-size,
          $font-weight: $dynamic-form-label-font-weight,
          $font-weight-bold: $dynamic-form-label-font-weight-bold
        );
      }

      .dynamic-form-toolbar {
        @include dynamic-form-toolbar(
          $flex: 1 1 0,
          $button-space: $dynamic-form-button-space
        );
      }
    }

    .dynamic-form-errors {
      @include dynamic-form-errors(
        $color: $dynamic-form-errors-color,
        $font-size: $dynamic-form-errors-font-size,
        $margin-top: $dynamic-form-errors-margin-top,
        $margin-bottom: $dynamic-form-errors-margin-bottom
      );
    }

    .dynamic-form-footer {
      @include dynamic-form-footer(
        $margin-top: $dynamic-form-footer-margin-top,
        $margin-bottom: $dynamic-form-footer-margin-bottom,
        $button-space: $dynamic-form-button-space,
      );
    }

    .dynamic-form-group {
      &.hidden {
        display: none;
      }

      .dynamic-form-group-header {
        @include dynamic-form-flex-container(
          $width: 100%,
          $margin-top: 0,
          $margin-bottom: 0.5rem,
          $align-items: center
        );

        .dynamic-form-group-label {
          @include dynamic-form-label(
            $font-weight: $dynamic-form-label-font-weight,
            $font-weight-bold: $dynamic-form-label-font-weight-bold
          );
        }

        .dynamic-form-group-toolbar {
          @include dynamic-form-toolbar(
            $flex: 1 1 0,
            $button-space: $dynamic-form-button-space
          );
        }
      }

      .dynamic-form-group-errors {
        @include dynamic-form-errors(
          $color: $dynamic-form-errors-color,
          $font-size: $dynamic-form-errors-font-size,
          $margin-top: $dynamic-form-errors-margin-top,
          $margin-bottom: $dynamic-form-errors-margin-bottom
        );
      }

      .dynamic-form-group-footer {
        @include dynamic-form-footer(
          $margin-top: $dynamic-form-footer-margin-top,
          $margin-bottom: $dynamic-form-footer-margin-bottom,
          $button-space: $dynamic-form-button-space,
        );
      }
    }

    .dynamic-form-array {
      &.hidden {
        display: none;
      }

      .dynamic-form-array-header {
        @include dynamic-form-flex-container(
          $width: 100%,
          $margin-top: 0,
          $margin-bottom: 0.5rem,
          $align-items: center
        );

        .dynamic-form-array-label {
          @include dynamic-form-label(
            $font-weight: $dynamic-form-label-font-weight,
            $font-weight-bold: $dynamic-form-label-font-weight-bold
          );
        }

        .dynamic-form-array-toolbar {
          @include dynamic-form-toolbar(
            $flex: 1 1 0,
            $button-space: $dynamic-form-button-space
          );
        }
      }

      .dynamic-form-array-errors {
        @include dynamic-form-errors(
          $color: $dynamic-form-errors-color,
          $font-size: $dynamic-form-errors-font-size,
          $margin-top: $dynamic-form-errors-margin-top,
          $margin-bottom: $dynamic-form-errors-margin-bottom
        );
      }

      .dynamic-form-array-footer {
        @include dynamic-form-footer(
          $margin-top: $dynamic-form-footer-margin-top,
          $margin-bottom: $dynamic-form-footer-margin-bottom,
          $button-space: $dynamic-form-button-space,
        );
      }
    }

    .dynamic-form-dictionary {
      &.hidden {
        display: none;
      }

      .dynamic-form-dictionary-header {
        @include dynamic-form-flex-container(
          $width: 100%,
          $margin-top: 0,
          $margin-bottom: 0.5rem,
          $align-items: center
        );

        .dynamic-form-dictionary-label {
          @include dynamic-form-label(
            $font-weight: $dynamic-form-label-font-weight,
            $font-weight-bold: $dynamic-form-label-font-weight-bold
          );
        }

        .dynamic-form-dictionary-toolbar {
          @include dynamic-form-toolbar(
            $flex: 1 1 0,
            $button-space: $dynamic-form-button-space
          );
        }
      }

      .dynamic-form-dictionary-errors {
        @include dynamic-form-errors(
          $color: $dynamic-form-errors-color,
          $font-size: $dynamic-form-errors-font-size,
          $margin-top: $dynamic-form-errors-margin-top,
          $margin-bottom: $dynamic-form-errors-margin-bottom
        );
      }

      .dynamic-form-dictionary-footer {
        @include dynamic-form-footer(
          $margin-top: $dynamic-form-footer-margin-top,
          $margin-bottom: $dynamic-form-footer-margin-bottom,
          $button-space: $dynamic-form-button-space,
        );
      }
    }

    .dynamic-form-control {
      &.hidden {
        display: none;
      }

      &.readonly {
        mat-form-field,
        mat-checkbox,
        mat-radio-group,
        mat-slide-toggle,
        mat-slide-toggle *,
        mat-button-toggle {
          pointer-events: none;
        }
      }

      mat-form-field {
        width: 100%;
      }

      .mat-mdc-form-field {
        &.mat-mdc-form-field-wrapper {
          display: flex;
          flex-direction: column;

          &:not(.mdc-text-field--invalid) {
            .mat-mdc-form-field-input-wrapper {
              .mat-mdc-form-field-input-label {
                color: rgba(0,0,0,.6);
              }
            }
          }

          .mat-mdc-form-field-input-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start;

            .mat-mdc-form-field-input-label {
              padding-left: 16px;
              padding-right: 16px;
              transform: translateX(5%) scale(0.75);

              &.mdc-floating-label {
                position: relative;
              }
            }
          }

          .mat-radio-group {
            display: inline-flex;
            flex-direction: column;

            .mat-radio-button {
              margin: 5px 0;
            }
          }
        }
      }
    }

    .dynamic-form-button {
      &.hidden {
        display: none;
      }
    }

    .dynamic-form-icon {
      &.hidden {
        display: none;
      }
    }

    .dynamic-form-accordion {
      &.mat-accordion {
        .mat-expansion-panel:last-of-type {
          border-bottom-right-radius: 4px;
          border-bottom-left-radius: 4px;
          margin-bottom: 4px;
        }
      }
    }

    .dynamic-form-tabs {
      .mat-mdc-tab-body-content {
        padding: 0 10px;
      }
    }
  }
}

.mat-mdc-dialog-container {
  .mdc-dialog__surface {
    padding: 20px;

    .dynamic-form-wrapper.material {
      width: 100%;
      height: 100%;

      .dynamic-form {
        width: 100%;
        height: 100%;
        margin: 0;

        &.grid {
          .dynamic-form-modal {
            .modal-body {
              &.row {
                margin: 0 calc(var(--bs-gutter-x) * -0.5);
                padding: 0;
              }
            }
          }
        }

        .dynamic-form-modal {
          width: 100%;
          height: 100%;

          .modal-header {
            display: flex;
            align-items: center;
            width: 100%;
            height: 40px;
            margin-bottom: 12px;

            .modal-title {
              &.modal-title-bg {
                font-size: 24px;
                font-weight: bold;
              }

              &.modal-title-md {
                font-size: 22px;
                font-weight: bold;
              }

              &.modal-title-sm {
                font-size: 20px;
                font-weight: bold;
              }
            }

            .modal-toolbar {
              flex: 1 1 0;
              display: flex;
              flex-direction: row;
              justify-content: flex-end;

              dynamic-form-elements {
                display: contents;
              }
            }
          }

          .modal-body {
            height: calc(100% - 100px);
            max-height: calc(100% - 100px);
            padding: 0 20px;
            margin: 0 -20px;
          }

          .modal-footer {
            display: flex;
            align-items: center;
            height: 48px;
            min-height: 48px;
            padding: 0;

            &.content-end {
              justify-content: flex-end;

              button {
                margin-left: 10px;
                margin-right: 0px;
              }
            }

            button {
              margin-left: 0px;
              margin-right: 10px;
            }
          }
        }
      }
    }
  }
}